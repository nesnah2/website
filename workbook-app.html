<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breaking Free From Your Default Mode - Workbook App</title>
    
    <!-- Cache busting for mobile -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <meta name="description" content="Complete transformation workbook - The real work to break free from your default mode">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* Updated design - v5.0 - Mobile Cache Bust - 2024-12-19 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a2332 100%);
            color: #ffffff;
            line-height: 1.6;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="0.5" fill="%23ffd700" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
            z-index: 0;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 30px 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 50px;
            padding: 50px 40px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            border: 1px solid rgba(255, 215, 0, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .header:hover {
            border-color: #ffd700;
            box-shadow: 0 20px 40px rgba(255, 215, 0, 0.1);
        }

        .header h1 {
            font-size: 4rem;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: #e2e8f0;
            font-weight: 400;
        }

        /* Phase Navigation */
        .phase-nav {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .phase-nav-btn {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 25px;
            color: #e2e8f0;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .phase-nav-btn:hover {
            background: rgba(255, 215, 0, 0.1);
            border-color: #ffd700;
            transform: translateY(-2px);
        }

        .phase-nav-btn.active {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #0f1419;
            border-color: #ffd700;
        }

        .phase-nav-btn.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .phase-nav-btn.locked:hover {
            transform: none;
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 215, 0, 0.3);
        }

        /* Phase Content */
        .phase-content {
            display: none;
        }

        .phase-content.active {
            display: block;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 215, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        .progress-bar h3 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .progress {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            height: 25px;
            overflow: hidden;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .progress-fill {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .exercise {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 215, 0, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .exercise:hover {
            border-color: #ffd700;
            box-shadow: 0 20px 40px rgba(255, 215, 0, 0.1);
        }

        .exercise h2 {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 25px;
            line-height: 1.2;
        }

        .exercise h3 {
            color: #ffd700;
            font-size: 1.3rem;
            font-weight: 700;
            margin: 25px 0 20px 0;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            color: #ffd700;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 1rem;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid rgba(255, 215, 0, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            color: #ffffff;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #ffd700;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.1);
        }

        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .btn {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #0f1419;
            border: none;
            padding: 18px 36px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 215, 0, 0.4);
        }

        .btn-secondary {
            background: transparent;
            color: #ffffff;
            border: 2px solid #ffd700;
            box-shadow: none;
        }

        .btn-secondary:hover {
            background: #ffd700;
            color: #0f1419;
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);
        }

        .actions {
            text-align: center;
            margin-top: 30px;
        }

        .instructions {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 215, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        .instructions h3 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 1.3rem;
            font-weight: 700;
        }

        .instructions p {
            color: #e2e8f0;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px 15px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .header p {
                font-size: 1.1rem;
            }
            
            .phase-nav {
                gap: 10px;
                margin-bottom: 30px;
            }
            
            .phase-nav-btn {
                padding: 10px 16px;
                font-size: 0.9rem;
            }
            
            .exercise {
                padding: 25px 20px;
            }
            
            .exercise h2 {
                font-size: 1.5rem;
            }
            
            .btn {
                padding: 15px 25px;
                font-size: 1rem;
                margin: 8px 3px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Breaking Free From Your Default Mode</h1>
            <p>Complete Workbook - The Real Work</p>
            <p style="margin-top: 15px; font-size: 14px; color: #ff6b35;">You've done the free guide. You've seen your patterns. You've felt the weight of your default mode. Now you're here because you want more than awareness, you want transformation.</p>
        </div>

        <!-- Phase Navigation -->
        <div class="phase-nav">
            <button class="phase-nav-btn active" onclick="showPhase('phase3')">Phase 3: Solitude</button>
            <button class="phase-nav-btn locked" onclick="showPhase('phase4')" id="phase4-btn">Phase 4: Transformation</button>
            <button class="phase-nav-btn locked" onclick="showPhase('phase5')" id="phase5-btn">Phase 5: Integration</button>
            <button class="phase-nav-btn locked" onclick="showPhase('phase6')" id="phase6-btn">Phase 6: Breakthrough</button>
        </div>

        <!-- Benefits Section -->
        <div class="exercise" style="border-color: #ffd700; background: rgba(255, 215, 0, 0.05);">
            <h2>When you complete this workbook, you'll have:</h2>
            <div style="margin: 25px 0;">
                <p style="color: #ffd700; margin: 10px 0; font-size: 1.1rem;">✅ Freedom from your default mode</p>
                <p style="color: #ffd700; margin: 10px 0; font-size: 1.1rem;">✅ Self-awareness</p>
                <p style="color: #ffd700; margin: 10px 0; font-size: 1.1rem;">✅ New ways of being</p>
                <p style="color: #ffd700; margin: 10px 0; font-size: 1.1rem;">✅ Comfort with yourself</p>
                <p style="color: #ffd700; margin: 10px 0; font-size: 1.1rem;">✅ Authentic identity</p>
                <p style="color: #ffd700; margin: 10px 0; font-size: 1.1rem;">✅ Daily practices</p>
                <p style="color: #ffd700; margin: 10px 0; font-size: 1.1rem;">✅ Declaration of Freedom</p>
                <p style="color: #ffd700; margin: 10px 0; font-size: 1.1rem;">✅ Breakthrough moments</p>
                <p style="color: #ffd700; margin: 10px 0; font-size: 1.1rem;">✅ A new default</p>
                <p style="color: #ffd700; margin: 10px 0; font-size: 1.1rem;">✅ The man you're meant to be</p>
            </div>
            <p style="color: #e2e8f0; font-style: italic; margin-top: 25px; font-size: 1.1rem;">This isn't just more exercises, this is the complete system for transformation. The free guide gave you awareness. This workbook gives you freedom.</p>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <h3>Your Progress</h3>
            <div class="progress">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p id="progressText">0% Complete</p>
        </div>

        <!-- Instructions -->
        <div class="instructions">
            <h3>📝 Instructions</h3>
            <p>• Answer each question honestly and completely</p>
            <p>• Your answers are saved automatically</p>
            <p>• Take your time - this is deep work</p>
            <p>• Be completely honest with yourself</p>
        </div>

        <!-- PHASE 3: SOLITUDE -->
        <div class="phase-content active" id="phase3">
            <div class="exercise" style="border-color: #ffd700; background: rgba(255, 215, 0, 0.05);">
                <h2>PHASE 3: SOLITUDE</h2>
            <p style="color: #e2e8f0; margin-bottom: 20px; font-size: 1.2rem; line-height: 1.6;">
                Most men avoid being alone because that's where the truth lives. No performance, no distractions, no external validation. Just you and your authentic self. This phase is where you learn to be comfortable with who you really are.
            </p>
            <p style="color: #ffd700; font-weight: 700; margin-top: 15px; font-size: 1.1rem;">
                "Find a blank paper and a fresh pen."
            </p>
        </div>

        <!-- Exercise 5: The Lonely Journey -->
        <div class="exercise" id="exercise5">
            <h2>EXERCISE 5: THE LONELY JOURNEY</h2>
            <p style="color: #b0b0b0; margin-bottom: 20px;">Learning to enjoy your own company</p>

            <h3>Part A: Your Side-Feeders</h3>
            <p style="color: #b0b0b0; margin-bottom: 15px;">What people, places, or things do you use to feed your lies of the default mode?</p>

            <div class="form-group">
                <label for="people">People:</label>
                <textarea id="people" name="people" placeholder="Who do you use to avoid being alone with yourself?"></textarea>
            </div>

            <div class="form-group">
                <label for="places">Places:</label>
                <textarea id="places" name="places" placeholder="Where do you go to escape from yourself?"></textarea>
            </div>

            <div class="form-group">
                <label for="activities">Activities:</label>
                <textarea id="activities" name="activities" placeholder="What do you do to avoid facing yourself?"></textarea>
            </div>

            <div class="form-group">
                <label for="substances">Substances:</label>
                <textarea id="substances" name="substances" placeholder="What do you use to numb yourself?"></textarea>
            </div>

            <div class="form-group">
                <label for="moment-feeling">How do these make you feel in the moment?</label>
                <textarea id="moment-feeling" name="moment-feeling" placeholder="What do you feel when you're using these side-feeders?"></textarea>
            </div>

            <div class="form-group">
                <label for="after-feeling">How do you feel after?</label>
                <textarea id="after-feeling" name="after-feeling" placeholder="What do you feel when the distraction ends?"></textarea>
            </div>

            <h3>Part B: The Silence Challenge</h3>
            <p style="color: #b0b0b0; margin-bottom: 15px;">Spend 30 minutes alone with no distractions. No phone, no music, no food, no entertainment.</p>

            <!-- Timer Section -->
            <div style="background: #2a2a2a; border: 2px solid #ff6b35; border-radius: 15px; padding: 25px; margin: 20px 0; text-align: center;">
                <h4 style="color: #ff6b35; margin-bottom: 15px;">⏰ 30-Minute Silence Timer</h4>
                <div id="timer-display" style="font-size: 48px; font-weight: bold; color: #ffffff; margin: 20px 0; font-family: 'Courier New', monospace;">
                    30:00
                </div>
                <div style="margin: 20px 0;">
                    <button id="timer-btn" class="btn" onclick="startSilenceTimer()" style="background: #ff6b35; color: white; padding: 15px 30px; font-size: 18px; border-radius: 25px;">
                        🚀 Start Silence Challenge
                    </button>
                    <button id="stop-btn" class="btn" onclick="stopSilenceTimer()" style="background: #666; color: white; padding: 15px 30px; font-size: 18px; border-radius: 25px; margin-left: 10px; display: none;">
                        ⏹️ Stop Timer
                    </button>
                </div>
                <p id="timer-status" style="color: #b0b0b0; font-style: italic; margin-top: 15px;">
                    Ready to begin your silence challenge
                </p>
                <div id="timer-progress" style="background: #444; height: 8px; border-radius: 4px; margin: 15px 0; overflow: hidden;">
                    <div id="progress-bar" style="background: linear-gradient(90deg, #ff6b35, #f7931e); height: 100%; width: 0%; transition: width 1s ease;"></div>
                </div>
            </div>

            <div class="form-group">
                <label for="discovered">What did you discover about yourself?</label>
                <textarea id="discovered" name="discovered" placeholder="What did you learn during the silence challenge?"></textarea>
            </div>

            <div class="form-group">
                <label for="thoughts">What thoughts came up?</label>
                <textarea id="thoughts" name="thoughts" placeholder="What was going through your mind?"></textarea>
            </div>

            <div class="form-group">
                <label for="emotions">What emotions did you feel?</label>
                <textarea id="emotions" name="emotions" placeholder="What feelings surfaced during the silence?"></textarea>
            </div>

            <div class="form-group">
                <label for="hardest">What was the hardest part?</label>
                <textarea id="hardest" name="hardest" placeholder="What was most difficult about being alone?"></textarea>
            </div>

            <div class="form-group">
                <label for="revealing">What was the most revealing?</label>
                <textarea id="revealing" name="revealing" placeholder="What surprised you most about yourself?"></textarea>
            </div>

            <h3>Part C: Your Relationship with Yourself</h3>

            <div class="form-group">
                <label for="comfort-level">Rate your comfort level with being alone (1-10):</label>
                <input type="number" id="comfort-level" name="comfort-level" min="1" max="10" placeholder="1-10">
            </div>

            <div class="form-group">
                <label for="avoid-alone">What do you avoid when you're alone?</label>
                <textarea id="avoid-alone" name="avoid-alone" placeholder="What do you run from when you're by yourself?"></textarea>
            </div>

            <div class="form-group">
                <label for="discover-alone">What do you discover when you're alone?</label>
                <textarea id="discover-alone" name="discover-alone" placeholder="What truths emerge when you're by yourself?"></textarea>
            </div>

            <div class="form-group">
                <label for="change-company">What would change if you learned to enjoy your own company?</label>
                <textarea id="change-company" name="change-company" placeholder="How would your life be different if you were comfortable alone?"></textarea>
            </div>
        </div>

        <!-- Exercise 6: Facing the Void -->
        <div class="exercise" id="exercise6">
            <h2>EXERCISE 6: FACING THE VOID</h2>
            <p style="color: #b0b0b0; margin-bottom: 20px;">What happens when you stop running</p>

            <h3>Part A: The Emptiness</h3>

            <div class="form-group">
                <label for="emptiness-feel">What do you feel when you're not doing anything?</label>
                <textarea id="emptiness-feel" name="emptiness-feel" placeholder="What emotions come up when you're idle?"></textarea>
            </div>

            <div class="form-group">
                <label for="emptiness-thoughts">What thoughts come up when you're not distracted?</label>
                <textarea id="emptiness-thoughts" name="emptiness-thoughts" placeholder="What goes through your mind in the silence?"></textarea>
            </div>

            <div class="form-group">
                <label for="emptiness-emotions">What emotions do you avoid by staying busy?</label>
                <textarea id="emptiness-emotions" name="emptiness-emotions" placeholder="What feelings do you run from?"></textarea>
            </div>

            <div class="form-group">
                <label for="emptiness-scary">What's the scariest part about being alone with your thoughts?</label>
                <textarea id="emptiness-scary" name="emptiness-scary" placeholder="What frightens you most about solitude?"></textarea>
            </div>

            <h3>Part B: The Real You Underneath</h3>

            <div class="form-group">
                <label for="real-you">Who are you when you're not performing for anyone?</label>
                <textarea id="real-you" name="real-you" placeholder="What's your authentic self like?"></textarea>
            </div>

            <div class="form-group">
                <label for="real-want">What do you really want when no one's watching?</label>
                <textarea id="real-want" name="real-want" placeholder="What are your true desires?"></textarea>
            </div>

            <div class="form-group">
                <label for="real-do">What would you do if you weren't trying to prove anything?</label>
                <textarea id="real-do" name="real-do" placeholder="How would you act without performance?"></textarea>
            </div>

            <div class="form-group">
                <label for="real-truth">What's your truth when you're not trying to be someone else?</label>
                <textarea id="real-truth" name="real-truth" placeholder="What's your authentic truth?"></textarea>
            </div>

            <h3>Part C: Embracing Solitude</h3>

            <div class="form-group">
                <label for="solitude-change">What would change if you learned to be comfortable alone?</label>
                <textarea id="solitude-change" name="solitude-change" placeholder="How would your life transform?"></textarea>
            </div>

            <div class="form-group">
                <label for="relationships-improve">How would your relationships improve if you didn't need them to fill a void?</label>
                <textarea id="relationships-improve" name="relationships-improve" placeholder="What would change in your connections?"></textarea>
            </div>

            <div class="form-group">
                <label for="create-alone">What would you create if you weren't afraid of being alone?</label>
                <textarea id="create-alone" name="create-alone" placeholder="What would you build or create?"></textarea>
            </div>
            </div>
        </div>

        <!-- PHASE 4: TRANSFORMATION -->
        <div class="phase-content" id="phase4">
            <div class="exercise" style="border-color: #ffd700; background: rgba(255, 215, 0, 0.05);">
                <h2>PHASE 4: TRANSFORMATION</h2>
                <p style="color: #e2e8f0; margin-bottom: 20px; font-size: 1.2rem; line-height: 1.6;">
                    Awareness without action is just self-awareness theater. This phase is where you stop analyzing and start changing. You'll rewrite your internal script and create new responses that serve the man you're becoming.
                </p>
            </div>

            <!-- Exercise 7: Rewriting the Script -->
        <div class="exercise" id="exercise7">
            <h2>EXERCISE 7: REWRITING THE SCRIPT</h2>
            <p style="color: #b0b0b0; margin-bottom: 20px;">From default mode to conscious choice</p>

            <h3>Part A: Your New Beliefs</h3>
            <p style="color: #b0b0b0; margin-bottom: 15px;">Replace your old default mode beliefs with new ones:</p>

            <div class="form-group">
                <label for="old-belief-1">Old Belief:</label>
                <textarea id="old-belief-1" name="old-belief-1" placeholder="What limiting belief do you want to replace?"></textarea>
            </div>

            <div class="form-group">
                <label for="new-belief-1">New Belief:</label>
                <textarea id="new-belief-1" name="new-belief-1" placeholder="What empowering belief will replace it?"></textarea>
            </div>

            <div class="form-group">
                <label for="old-belief-2">Old Belief:</label>
                <textarea id="old-belief-2" name="old-belief-2" placeholder="What limiting belief do you want to replace?"></textarea>
            </div>

            <div class="form-group">
                <label for="new-belief-2">New Belief:</label>
                <textarea id="new-belief-2" name="new-belief-2" placeholder="What empowering belief will replace it?"></textarea>
            </div>

            <div class="form-group">
                <label for="old-belief-3">Old Belief:</label>
                <textarea id="old-belief-3" name="old-belief-3" placeholder="What limiting belief do you want to replace?"></textarea>
            </div>

            <div class="form-group">
                <label for="new-belief-3">New Belief:</label>
                <textarea id="new-belief-3" name="new-belief-3" placeholder="What empowering belief will replace it?"></textarea>
            </div>

            <h3>Part B: New Responses</h3>
            <p style="color: #b0b0b0; margin-bottom: 15px;">How will you respond differently to triggers?</p>

            <div class="form-group">
                <label for="criticized-response">When criticized:</label>
                <textarea id="criticized-response" name="criticized-response" placeholder="How will you respond to criticism?"></textarea>
            </div>

            <div class="form-group">
                <label for="rejected-response">When rejected:</label>
                <textarea id="rejected-response" name="rejected-response" placeholder="How will you handle rejection?"></textarea>
            </div>

            <div class="form-group">
                <label for="failure-response">When facing failure:</label>
                <textarea id="failure-response" name="failure-response" placeholder="How will you respond to failure?"></textarea>
            </div>

            <div class="form-group">
                <label for="inadequate-response">When feeling inadequate:</label>
                <textarea id="inadequate-response" name="inadequate-response" placeholder="How will you handle feelings of inadequacy?"></textarea>
            </div>

            <div class="form-group">
                <label for="disagree-response">When someone disagrees:</label>
                <textarea id="disagree-response" name="disagree-response" placeholder="How will you handle disagreement?"></textarea>
            </div>

            <h3>Part C: Your Commitment</h3>

            <div class="form-group">
                <label for="pattern-change">What's one default mode pattern you're committing to change?</label>
                <textarea id="pattern-change" name="pattern-change" placeholder="Which pattern will you transform?"></textarea>
            </div>

            <div class="form-group">
                <label for="new-response">The New Response:</label>
                <textarea id="new-response" name="new-response" placeholder="How will you respond differently?"></textarea>
            </div>

            <div class="form-group">
                <label for="practice-how">How you'll practice:</label>
                <textarea id="practice-how" name="practice-how" placeholder="What will you do to practice this new response?"></textarea>
            </div>

            <div class="form-group">
                <label for="working-signs">How you'll know it's working:</label>
                <textarea id="working-signs" name="working-signs" placeholder="What signs will show you're making progress?"></textarea>
            </div>
        </div>

        <!-- Exercise 8: The New You -->
        <div class="exercise" id="exercise8">
            <h2>EXERCISE 8: THE NEW YOU</h2>
            <p style="color: #b0b0b0; margin-bottom: 20px;">Creating your authentic identity</p>

            <h3>Part A: Your Core Values</h3>
            <p style="color: #b0b0b0; margin-bottom: 15px;">What are your real values when the default mode isn't running the show?</p>

            <div class="form-group">
                <label for="value-1">Value 1:</label>
                <textarea id="value-1" name="value-1" placeholder="What do you truly value?"></textarea>
            </div>

            <div class="form-group">
                <label for="value-2">Value 2:</label>
                <textarea id="value-2" name="value-2" placeholder="What do you truly value?"></textarea>
            </div>

            <div class="form-group">
                <label for="value-3">Value 3:</label>
                <textarea id="value-3" name="value-3" placeholder="What do you truly value?"></textarea>
            </div>

            <div class="form-group">
                <label for="value-4">Value 4:</label>
                <textarea id="value-4" name="value-4" placeholder="What do you truly value?"></textarea>
            </div>

            <div class="form-group">
                <label for="value-5">Value 5:</label>
                <textarea id="value-5" name="value-5" placeholder="What do you truly value?"></textarea>
            </div>

            <h3>Part B: Your Authentic Self</h3>

            <div class="form-group">
                <label for="authentic-act">How would you act if you weren't trying to be someone else?</label>
                <textarea id="authentic-act" name="authentic-act" placeholder="How would you behave authentically?"></textarea>
            </div>

            <div class="form-group">
                <label for="authentic-say">What would you say if you weren't trying to please anyone?</label>
                <textarea id="authentic-say" name="authentic-say" placeholder="What would you express freely?"></textarea>
            </div>

            <div class="form-group">
                <label for="authentic-time">How would you spend your time if you weren't trying to prove anything?</label>
                <textarea id="authentic-time" name="authentic-time" placeholder="What would you do with your time?"></textarea>
            </div>

            <div class="form-group">
                <label for="authentic-create">What would you create if you weren't afraid of judgment?</label>
                <textarea id="authentic-create" name="authentic-create" placeholder="What would you build or create?"></textarea>
            </div>

            <h3>Part C: Your New Standards</h3>

            <div class="form-group">
                <label for="no-longer-accept">What will you no longer accept in your life?</label>
                <textarea id="no-longer-accept" name="no-longer-accept" placeholder="What boundaries will you set?"></textarea>
            </div>

            <div class="form-group">
                <label for="start-differently">What will you start doing differently?</label>
                <textarea id="start-differently" name="start-differently" placeholder="What new behaviors will you adopt?"></textarea>
            </div>

            <div class="form-group">
                <label for="boundaries-set">What boundaries will you set?</label>
                <textarea id="boundaries-set" name="boundaries-set" placeholder="What limits will you establish?"></textarea>
            </div>

            <div class="form-group">
                <label for="prioritize-forward">What will you prioritize going forward?</label>
                <textarea id="prioritize-forward" name="prioritize-forward" placeholder="What will be most important to you?"></textarea>
            </div>
            </div>
            </div>
        </div>

        <!-- PHASE 5: INTEGRATION -->
        <div class="phase-content" id="phase5">
            <div class="exercise" style="border-color: #ffd700; background: rgba(255, 215, 0, 0.05);">
                <h2>PHASE 5: INTEGRATION</h2>
            <p style="color: #e2e8f0; margin-bottom: 20px; font-size: 1.2rem; line-height: 1.6;">
                Transformation that doesn't last is just another performance. This phase ensures your new patterns become your new default. You'll create systems and practices that keep you awake and conscious every day.
            </p>
        </div>

        <!-- Exercise 9: Daily Awareness Practice -->
        <div class="exercise" id="exercise9">
            <h2>EXERCISE 9: DAILY AWARENESS PRACTICE</h2>
            <p style="color: #b0b0b0; margin-bottom: 20px;">Staying awake to your default mode</p>

            <h3>Part A: Morning Check-In</h3>
            <p style="color: #b0b0b0; margin-bottom: 15px;">EVERY morning, ask yourself:</p>

            <div class="form-group">
                <label for="morning-default">What does my default mode want me to do today?</label>
                <textarea id="morning-default" name="morning-default" placeholder="What patterns are trying to take over?"></textarea>
            </div>

            <div class="form-group">
                <label for="morning-want">What do I actually want to do?</label>
                <textarea id="morning-want" name="morning-want" placeholder="What do you consciously choose?"></textarea>
            </div>

            <div class="form-group">
                <label for="morning-difference">What's the difference?</label>
                <textarea id="morning-difference" name="morning-difference" placeholder="How do these differ?"></textarea>
            </div>

            <h3>Part B: Moment-by-Moment Awareness</h3>
            <p style="color: #b0b0b0; margin-bottom: 15px;">Throughout the day, pause and ask:</p>

            <div class="form-group">
                <label for="moment-awareness">Am I acting from my default mode or from conscious choice?</label>
                <textarea id="moment-awareness" name="moment-awareness" placeholder="What's driving your actions right now?"></textarea>
            </div>

            <div class="form-group">
                <label for="moment-escape">What am I trying to escape from right now?</label>
                <textarea id="moment-escape" name="moment-escape" placeholder="What are you avoiding?"></textarea>
            </div>

            <div class="form-group">
                <label for="moment-present">What would it look like to stay present with this feeling?</label>
                <textarea id="moment-present" name="moment-present" placeholder="How would you face this feeling?"></textarea>
            </div>

            <h3>Part C: Evening Reflection</h3>
            <p style="color: #b0b0b0; margin-bottom: 15px;">At the end of each day, reflect:</p>

            <div class="form-group">
                <label for="evening-default">When did my default mode take over today?</label>
                <textarea id="evening-default" name="evening-default" placeholder="What moments did you lose awareness?"></textarea>
            </div>

            <div class="form-group">
                <label for="evening-learn">What did I learn about myself?</label>
                <textarea id="evening-learn" name="evening-learn" placeholder="What insights did you gain?"></textarea>
            </div>

            <div class="form-group">
                <label for="evening-different">What will I do differently tomorrow?</label>
                <textarea id="evening-different" name="evening-different" placeholder="How will you improve?"></textarea>
            </div>

            <div class="form-group">
                <label for="evening-grateful">What am I grateful for about today?</label>
                <textarea id="evening-grateful" name="evening-grateful" placeholder="What went well today?"></textarea>
            </div>
        </div>

        <!-- Exercise 10: The Daily Work -->
        <div class="exercise" id="exercise10">
            <h2>EXERCISE 10: THE DAILY WORK</h2>
            <p style="color: #b0b0b0; margin-bottom: 20px;">Making transformation your new default</p>

            <h3>Part A: Your Daily Practices</h3>

            <div class="form-group">
                <label for="daily-awareness">What will you do every day to stay aware of your default mode?</label>
                <textarea id="daily-awareness" name="daily-awareness" placeholder="What daily practices will you commit to?"></textarea>
            </div>

            <div class="form-group">
                <label for="daily-catch">What will you do when you catch yourself in old patterns?</label>
                <textarea id="daily-catch" name="daily-catch" placeholder="How will you course-correct?"></textarea>
            </div>

            <div class="form-group">
                <label for="daily-celebrate">How will you celebrate your wins?</label>
                <textarea id="daily-celebrate" name="daily-celebrate" placeholder="How will you acknowledge progress?"></textarea>
            </div>

            <div class="form-group">
                <label for="daily-setbacks">How will you handle setbacks?</label>
                <textarea id="daily-setbacks" name="daily-setbacks" placeholder="How will you bounce back?"></textarea>
            </div>

            <h3>Part B: Your Support System</h3>

            <div class="form-group">
                <label for="support-tell">Who will you tell about this work?</label>
                <textarea id="support-tell" name="support-tell" placeholder="Who will know about your transformation?"></textarea>
            </div>

            <div class="form-group">
                <label for="support-accountable">Who will hold you accountable?</label>
                <textarea id="support-accountable" name="support-accountable" placeholder="Who will keep you on track?"></textarea>
            </div>

            <div class="form-group">
                <label for="support-giveup">What will you do when you want to give up?</label>
                <textarea id="support-giveup" name="support-giveup" placeholder="How will you stay committed?"></textarea>
            </div>

            <div class="form-group">
                <label for="support-committed">How will you stay committed to the process?</label>
                <textarea id="support-committed" name="support-committed" placeholder="What will keep you going?"></textarea>
            </div>

            <h3>Part C: Your Progress Tracking</h3>

            <div class="form-group">
                <label for="progress-measure">How will you measure your progress?</label>
                <textarea id="progress-measure" name="progress-measure" placeholder="What metrics will you track?"></textarea>
            </div>

            <div class="form-group">
                <label for="success-30">What will success look like in 30 days?</label>
                <textarea id="success-30" name="success-30" placeholder="What will you have achieved in a month?"></textarea>
            </div>

            <div class="form-group">
                <label for="success-90">What will success look like in 90 days?</label>
                <textarea id="success-90" name="success-90" placeholder="What will you have achieved in 3 months?"></textarea>
            </div>

            <div class="form-group">
                <label for="success-year">What will success look like in one year?</label>
                <textarea id="success-year" name="success-year" placeholder="What will you have achieved in a year?"></textarea>
            </div>
            </div>
            </div>
        </div>

        <!-- PHASE 6: BREAKTHROUGH -->
        <div class="phase-content" id="phase6">
            <div class="exercise" style="border-color: #ffd700; background: rgba(255, 215, 0, 0.05);">
                <h2>PHASE 6: BREAKTHROUGH</h2>
            <p style="color: #e2e8f0; margin-bottom: 20px; font-size: 1.2rem; line-height: 1.6;">
                Sometimes you need to break down to break through. This phase is where you push past your comfort zone and into your authentic power. It's uncomfortable, but it's where real transformation happens.
            </p>
        </div>

        <!-- Exercise 11: The Breakdown Breakthrough -->
        <div class="exercise" id="exercise11">
            <h2>EXERCISE 11: THE BREAKDOWN BREAKTHROUGH</h2>
            <p style="color: #b0b0b0; margin-bottom: 20px;">Sometimes you need to break down to break through</p>

            <h3>Part A: Your Breaking Point</h3>

            <div class="form-group">
                <label for="breakdown-take">What would it take for you to have a real breakdown?</label>
                <textarea id="breakdown-take" name="breakdown-take" placeholder="What would push you to your limit?"></textarea>
            </div>

            <div class="form-group">
                <label for="breakdown-avoiding">What are you avoiding that could trigger it?</label>
                <textarea id="breakdown-avoiding" name="breakdown-avoiding" placeholder="What are you running from?"></textarea>
            </div>

            <div class="form-group">
                <label for="breakdown-feel">What would happen if you let yourself feel everything you've been numbing?</label>
                <textarea id="breakdown-feel" name="breakdown-feel" placeholder="What emotions would surface?"></textarea>
            </div>

            <div class="form-group">
                <label for="breakdown-worst">What's the worst that could happen?</label>
                <textarea id="breakdown-worst" name="breakdown-worst" placeholder="What's your biggest fear?"></textarea>
            </div>

            <div class="form-group">
                <label for="breakdown-best">What's the best that could happen?</label>
                <textarea id="breakdown-best" name="breakdown-best" placeholder="What breakthrough could occur?"></textarea>
            </div>

            <h3>Part B: The Rebuild</h3>
            <p style="color: #b0b0b0; margin-bottom: 15px;">If you had a complete breakdown and had to rebuild from scratch, what would you create?</p>

            <div class="form-group">
                <label for="rebuild-identity">Your new identity:</label>
                <textarea id="rebuild-identity" name="rebuild-identity" placeholder="Who would you become?"></textarea>
            </div>

            <div class="form-group">
                <label for="rebuild-values">Your new values:</label>
                <textarea id="rebuild-values" name="rebuild-values" placeholder="What would you stand for?"></textarea>
            </div>

            <div class="form-group">
                <label for="rebuild-relationships">Your new relationships:</label>
                <textarea id="rebuild-relationships" name="rebuild-relationships" placeholder="How would you connect with others?"></textarea>
            </div>

            <div class="form-group">
                <label for="rebuild-purpose">Your new purpose:</label>
                <textarea id="rebuild-purpose" name="rebuild-purpose" placeholder="What would drive you?"></textarea>
            </div>

            <div class="form-group">
                <label for="rebuild-being">Your new way of being:</label>
                <textarea id="rebuild-being" name="rebuild-being" placeholder="How would you show up in the world?"></textarea>
            </div>

            <h3>Part C: Your Declaration</h3>
            <p style="color: #b0b0b0; margin-bottom: 15px;">Write your declaration of freedom from your default mode:</p>

            <div class="form-group">
                <label for="declaration-no-longer">"I am no longer..."</label>
                <textarea id="declaration-no-longer" name="declaration-no-longer" placeholder="What are you leaving behind?"></textarea>
            </div>

            <div class="form-group">
                <label for="declaration-now">"I am now..."</label>
                <textarea id="declaration-now" name="declaration-now" placeholder="Who are you becoming?"></textarea>
            </div>

            <div class="form-group">
                <label for="declaration-choose">"I choose to..."</label>
                <textarea id="declaration-choose" name="declaration-choose" placeholder="What will you choose?"></textarea>
            </div>

            <div class="form-group">
                <label for="declaration-commit">"I commit to..."</label>
                <textarea id="declaration-commit" name="declaration-commit" placeholder="What will you commit to?"></textarea>
            </div>
        </div>

        <!-- Exercise 12: Your Declaration of Freedom -->
        <div class="exercise" id="exercise12">
            <h2>EXERCISE 12: YOUR DECLARATION OF FREEDOM</h2>
            <p style="color: #b0b0b0; margin-bottom: 20px;">The final exercise</p>

            <h3>Part A: What You're Leaving Behind</h3>

            <div class="form-group">
                <label for="leave-controlled">I am no longer controlled by:</label>
                <textarea id="leave-controlled" name="leave-controlled" placeholder="What patterns are you breaking free from?"></textarea>
            </div>

            <div class="form-group">
                <label for="leave-afraid">I am no longer afraid of:</label>
                <textarea id="leave-afraid" name="leave-afraid" placeholder="What fears are you releasing?"></textarea>
            </div>

            <div class="form-group">
                <label for="leave-trying">I am no longer trying to:</label>
                <textarea id="leave-trying" name="leave-trying" placeholder="What performance are you ending?"></textarea>
            </div>

            <div class="form-group">
                <label for="leave-settling">I am no longer settling for:</label>
                <textarea id="leave-settling" name="leave-settling" placeholder="What mediocrity are you rejecting?"></textarea>
            </div>

            <h3>Part B: What You're Stepping Into</h3>

            <div class="form-group">
                <label for="step-man">I am now the man who:</label>
                <textarea id="step-man" name="step-man" placeholder="Who are you becoming?"></textarea>
            </div>

            <div class="form-group">
                <label for="step-committed">I am now committed to:</label>
                <textarea id="step-committed" name="step-committed" placeholder="What are you dedicated to?"></textarea>
            </div>

            <div class="form-group">
                <label for="step-choosing">I am now choosing to:</label>
                <textarea id="step-choosing" name="step-choosing" placeholder="What will you consciously choose?"></textarea>
            </div>

            <div class="form-group">
                <label for="step-creating">I am now creating:</label>
                <textarea id="step-creating" name="step-creating" placeholder="What will you build?"></textarea>
            </div>

            <h3>Part C: Your Commitment</h3>

            <div class="form-group">
                <label for="commit-work">I commit to doing this work every day because:</label>
                <textarea id="commit-work" name="commit-work" placeholder="Why is this work important to you?"></textarea>
            </div>

            <div class="form-group">
                <label for="commit-aware">I commit to staying aware because:</label>
                <textarea id="commit-aware" name="commit-aware" placeholder="Why is awareness crucial?"></textarea>
            </div>

            <div class="form-group">
                <label for="commit-choosing">I commit to choosing consciously because:</label>
                <textarea id="commit-choosing" name="commit-choosing" placeholder="Why is conscious choice important?"></textarea>
            </div>

            <div class="form-group">
                <label for="commit-being">I commit to being the man I'm meant to be because:</label>
                <textarea id="commit-being" name="commit-being" placeholder="Why is authentic being essential?"></textarea>
            </div>
            </div>
        </div>

        <!-- Final Section -->
        <div class="exercise" style="border-color: #ffd700; background: rgba(255, 215, 0, 0.05);">
            <h2>THE DAILY WORK</h2>
            <p style="color: #e2e8f0; margin-bottom: 25px; font-size: 1.2rem;">Your default mode won't disappear overnight. It's been running your life for years. But every moment you choose awareness over autopilot, you're taking back control.</p>
            
            <p style="color: #ffd700; margin-bottom: 20px; font-weight: 700; font-size: 1.2rem;">The work is simple but not easy:</p>
            <p style="color: #e2e8f0; margin: 12px 0; font-size: 1.1rem;">1. Notice - when your default mode takes over</p>
            <p style="color: #e2e8f0; margin: 12px 0; font-size: 1.1rem;">2. Pause - before reacting automatically</p>
            <p style="color: #e2e8f0; margin: 12px 0; font-size: 1.1rem;">3. Observe - what's really happening inside you</p>
            <p style="color: #e2e8f0; margin: 12px 0; font-size: 1.1rem;">4. Choose - your response consciously</p>
            <p style="color: #e2e8f0; margin: 12px 0; font-size: 1.1rem;">5. Repeat - until it becomes natural</p>

            <p style="color: #e2e8f0; margin-top: 25px; font-size: 1.1rem;">There will be days when you fail. Days when you fall back into old patterns. Days when you want to give up.</p>
            <p style="color: #ffd700; margin: 15px 0; font-weight: 700; font-size: 1.2rem;">That's not failure. That's the work.</p>
            <p style="color: #e2e8f0; margin: 12px 0; font-size: 1.1rem;">Every breakdown is a breakthrough waiting to happen.</p>
            <p style="color: #e2e8f0; margin: 12px 0; font-size: 1.1rem;">Every moment of awareness is a step toward freedom.</p>
            <p style="color: #e2e8f0; margin: 12px 0; font-size: 1.1rem;">Every choice to stay present is a victory over your default mode.</p>
        </div>

        <!-- Mentorship CTA -->
        <div class="exercise" style="border-color: #ffd700; background: rgba(255, 215, 0, 0.05);">
            <h2>THE COURAGE TO BE REAL</h2>
            <p style="color: #e2e8f0; margin-bottom: 25px; font-size: 1.2rem;">You've done the work. You've faced your patterns. You've seen your default mode for what it really is. Now comes the hardest part: staying awake.</p>
            
            <p style="color: #e2e8f0; margin-bottom: 20px; font-size: 1.1rem;">Most men will go back to their comfortable lies. They'll download this workbook, do a few exercises, and return to their default mode. But you're here because you're different. You're the man who's ready to do the real work. The uncomfortable work. The work that actually transforms lives.</p>
            
            <p style="color: #e2e8f0; margin-bottom: 20px; font-size: 1.1rem;">This workbook gave you the roadmap. But transformation doesn't happen in isolation. You need someone who's been there. Someone who's done the work. Someone who won't let you off the hook.</p>
            
            <p style="color: #ffd700; margin-bottom: 20px; font-weight: 700; font-size: 1.2rem;">You need a mentor. Someone who will hold you accountable when you want to quit. Someone who will call out your bullshit when you're performing. Someone who will push you when you're stuck.</p>
            
            <p style="color: #e2e8f0; margin-bottom: 20px; font-size: 1.1rem;">Because the default mode doesn't change overnight. It fights back. It tries to pull you back into old patterns. You need someone in your corner who understands the fight.</p>
            
            <p style="color: #ffd700; margin-bottom: 20px; font-weight: 700; font-size: 1.2rem;">That's where I come in. I've been where you are. I've done the work. I've broken free from my default mode. And I can help you do the same.</p>
            
            <p style="color: #e2e8f0; margin-bottom: 20px; font-size: 1.1rem;">If you're ready to stop doing this alone, if you're ready to have someone who's been there guide you through the transformation, then let's talk.</p>
            
            <p style="color: #ffd700; margin-bottom: 25px; font-weight: 700; font-size: 1.2rem;">This isn't for everyone. This is for men who are serious about change. Men who are ready to do the real work. Are you one of them?</p>
            
            <div style="text-align: center; margin-top: 35px;">
                <button class="btn" onclick="window.open('mailto:contact@mikkelhansen.org?subject=1:1 Mentorship Application', '_blank')">📞 Book 30 Minutes Free Discovery Call</button>
            </div>
        </div>

        <!-- Actions -->
        <div class="actions">
            <button class="btn" onclick="saveProgress()">💾 Save Progress</button>
            <button class="btn btn-secondary" onclick="completeCurrentPhase()">✅ Complete Current Phase</button>
            <button class="btn btn-secondary" onclick="exportToPDF()">📄 Export to PDF</button>
            <button class="btn btn-secondary" onclick="resetExercise()">🔄 Reset Exercise</button>
            <button class="btn btn-secondary" onclick="logout()" style="background: #ff6b35;">🚪 Logout</button>
        </div>
    </div>

    <script>
        // Phase Navigation
        function showPhase(phaseId) {
            // Check if phase is locked
            const phaseButton = document.getElementById(phaseId + '-btn');
            if (phaseButton && phaseButton.classList.contains('locked')) {
                alert('Complete the previous phase to unlock this one!');
                return;
            }
            
            console.log('Switching to phase:', phaseId); // Debug log
            
            // Hide all phase content
            const allPhases = document.querySelectorAll('.phase-content');
            allPhases.forEach(phase => {
                phase.classList.remove('active');
                console.log('Hiding phase:', phase.id); // Debug log
            });
            
            // Show selected phase
            const selectedPhase = document.getElementById(phaseId);
            if (selectedPhase) {
                selectedPhase.classList.add('active');
                console.log('Showing phase:', phaseId, 'Element:', selectedPhase); // Debug log
            } else {
                console.error('Phase not found:', phaseId); // Debug log
            }
            
            // Update navigation buttons
            const allButtons = document.querySelectorAll('.phase-nav-btn');
            allButtons.forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Activate current button
            const currentButton = document.querySelector(`[onclick="showPhase('${phaseId}')"]`);
            if (currentButton) {
                currentButton.classList.add('active');
            }
            
            // Update progress for current phase
            updateProgress();
        }

        // Complete current phase and unlock next
        function completeCurrentPhase() {
            const activePhase = document.querySelector('.phase-content.active');
            if (!activePhase) return;
            
            const phaseId = activePhase.id;
            const inputs = activePhase.querySelectorAll('input, textarea');
            let completedCount = 0;
            
            // Check if phase is at least 80% complete
            inputs.forEach(input => {
                if (input.value.trim() !== '') {
                    completedCount++;
                }
            });
            
            const completionPercentage = (completedCount / inputs.length) * 100;
            
            if (completionPercentage < 80) {
                alert(`Please complete at least 80% of the current phase before marking it complete. You're currently at ${Math.round(completionPercentage)}%`);
                return;
            }
            
            // Mark phase as completed
            const currentUser = sessionStorage.getItem('currentUser');
            if (currentUser) {
                const user = JSON.parse(currentUser);
                const users = JSON.parse(localStorage.getItem('workbookUsers') || '{}');
                
                if (!users[user.email]) {
                    users[user.email] = { workbookProgress: {}, completedPhases: [] };
                }
                
                if (!users[user.email].completedPhases) {
                    users[user.email].completedPhases = [];
                }
                
                if (!users[user.email].completedPhases.includes(phaseId)) {
                    users[user.email].completedPhases.push(phaseId);
                    localStorage.setItem('workbookUsers', JSON.stringify(users));
                }
            }
            
            // Unlock next phase
            unlockNextPhase(phaseId);
            
            alert(`🎉 Phase completed! Next phase unlocked.`);
        }

        // Unlock next phase
        function unlockNextPhase(currentPhaseId) {
            const phaseOrder = ['phase3', 'phase4', 'phase5', 'phase6'];
            const currentIndex = phaseOrder.indexOf(currentPhaseId);
            
            if (currentIndex < phaseOrder.length - 1) {
                const nextPhaseId = phaseOrder[currentIndex + 1];
                const nextButton = document.getElementById(nextPhaseId + '-btn');
                
                if (nextButton) {
                    nextButton.classList.remove('locked');
                    nextButton.style.opacity = '1';
                    nextButton.style.cursor = 'pointer';
                }
            }
        }

        // Check unlocked phases on load
        function checkUnlockedPhases() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) return;
            
            const user = JSON.parse(currentUser);
            const users = JSON.parse(localStorage.getItem('workbookUsers') || '{}');
            
            if (users[user.email] && users[user.email].completedPhases) {
                const completedPhases = users[user.email].completedPhases;
                
                // Unlock phases based on completed ones
                completedPhases.forEach(phaseId => {
                    unlockNextPhase(phaseId);
                });
            }
        }

        // Progress tracking
        let totalQuestions = 0;
        let completedQuestions = 0;

        // Count total questions
        function countQuestions() {
            const inputs = document.querySelectorAll('input, textarea');
            totalQuestions = inputs.length;
            updateProgress();
        }

        // Update progress
        function updateProgress() {
            // Get inputs from the currently active phase
            const activePhase = document.querySelector('.phase-content.active');
            const inputs = activePhase ? activePhase.querySelectorAll('input, textarea') : document.querySelectorAll('input, textarea');
            
            completedQuestions = 0;
            
            inputs.forEach(input => {
                if (input.value.trim() !== '') {
                    completedQuestions++;
                }
            });

            const percentage = inputs.length > 0 ? Math.round((completedQuestions / inputs.length) * 100) : 0;
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent = percentage + '% Complete';
        }

        // Timer functionality for Silence Challenge
        let silenceTimer = null;
        let timeRemaining = 30 * 60; // 30 minutes in seconds
        let isTimerRunning = false;

        function startSilenceTimer() {
            if (isTimerRunning) return;
            
            isTimerRunning = true;
            timeRemaining = 30 * 60; // Reset to 30 minutes
            
            // Update UI
            document.getElementById('timer-btn').style.display = 'none';
            document.getElementById('stop-btn').style.display = 'inline-block';
            document.getElementById('timer-status').textContent = 'Silence challenge in progress... Find a quiet space and begin.';
            
            // Start the timer
            silenceTimer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    completeSilenceChallenge();
                }
            }, 1000);
        }

        function stopSilenceTimer() {
            if (silenceTimer) {
                clearInterval(silenceTimer);
                silenceTimer = null;
            }
            
            isTimerRunning = false;
            
            // Update UI
            document.getElementById('timer-btn').style.display = 'inline-block';
            document.getElementById('stop-btn').style.display = 'none';
            document.getElementById('timer-status').textContent = 'Timer stopped. Ready to begin your silence challenge.';
            
            // Reset display
            document.getElementById('timer-display').textContent = '30:00';
            document.getElementById('progress-bar').style.width = '0%';
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const display = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('timer-display').textContent = display;
            
            // Update progress bar
            const progress = ((30 * 60 - timeRemaining) / (30 * 60)) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';
        }

        function completeSilenceChallenge() {
            if (silenceTimer) {
                clearInterval(silenceTimer);
                silenceTimer = null;
            }
            
            isTimerRunning = false;
            
            // Play bell sound (using Web Audio API)
            playBellSound();
            
            // Update UI
            document.getElementById('timer-display').textContent = '00:00';
            document.getElementById('timer-btn').style.display = 'inline-block';
            document.getElementById('stop-btn').style.display = 'none';
            document.getElementById('timer-status').textContent = '🎉 Silence challenge complete! Well done. Now reflect on your experience.';
            document.getElementById('progress-bar').style.width = '100%';
            
            // Show completion message
            setTimeout(() => {
                alert('🔔 Silence Challenge Complete!\n\nCongratulations! You\'ve spent 30 minutes in silence. This is powerful work. Now take a moment to reflect on what you discovered about yourself.');
            }, 1000);
        }

        function playBellSound() {
            try {
                // Create a simple bell sound using Web Audio API
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Bell-like sound (multiple frequencies)
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(1000, audioContext.currentTime + 0.1);
                oscillator.frequency.setValueAtTime(1200, audioContext.currentTime + 0.2);
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 1);
                
                // Play a second bell for emphasis
                setTimeout(() => {
                    const oscillator2 = audioContext.createOscillator();
                    const gainNode2 = audioContext.createGain();
                    
                    oscillator2.connect(gainNode2);
                    gainNode2.connect(audioContext.destination);
                    
                    oscillator2.frequency.setValueAtTime(1000, audioContext.currentTime);
                    oscillator2.frequency.setValueAtTime(1200, audioContext.currentTime + 0.1);
                    
                    gainNode2.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gainNode2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.8);
                    
                    oscillator2.start(audioContext.currentTime);
                    oscillator2.stop(audioContext.currentTime + 0.8);
                }, 200);
                
            } catch (error) {
                console.log('Audio not available, using visual notification only');
            }
        }

        // Check if user is logged in
        function checkUserLogin() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (currentUser) {
                const user = JSON.parse(currentUser);
                // Update header to show user name
                const header = document.querySelector('.header h1');
                if (header) {
                    header.innerHTML = `Breaking Free From Your Default Mode<br><small style="color: #44cc44;">Welcome, ${user.name}</small>`;
                }
                // Load shared progress
                loadUserProgress();
            } else {
                // Redirect to login if not authenticated
                alert('Please log in to access the workbook.');
                window.location.href = 'workbook-login.html';
            }
        }

        // Load user's individual progress
        function loadUserProgress() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) return;
            
            const user = JSON.parse(currentUser);
            const users = JSON.parse(localStorage.getItem('workbookUsers') || '{}');
            
            if (users[user.email] && users[user.email].workbookProgress) {
                const userProgress = users[user.email].workbookProgress;
                const inputs = document.querySelectorAll('input, textarea');
                
                inputs.forEach(input => {
                    if (userProgress[input.name]) {
                        input.value = userProgress[input.name];
                    }
                });
            }
            
            updateProgress();
        }

        // Save user's individual progress
        function saveProgress() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) {
                alert('Please log in to save your progress.');
                return;
            }
            
            const user = JSON.parse(currentUser);
            const users = JSON.parse(localStorage.getItem('workbookUsers') || '{}');
            const inputs = document.querySelectorAll('input, textarea');
            const data = {};
            
            inputs.forEach(input => {
                data[input.name] = input.value;
            });

            // Save to user's individual storage
            if (!users[user.email]) {
                users[user.email] = { workbookProgress: {} };
            }
            users[user.email].workbookProgress = data;
            localStorage.setItem('workbookUsers', JSON.stringify(users));
            
            alert('Progress saved successfully!');
        }

        // Auto-save functionality
        function autoSave() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) return;
            
            const user = JSON.parse(currentUser);
            const users = JSON.parse(localStorage.getItem('workbookUsers') || '{}');
            const inputs = document.querySelectorAll('input, textarea');
            const data = {};
            
            inputs.forEach(input => {
                data[input.name] = input.value;
            });

            // Auto-save to user's individual storage
            if (!users[user.email]) {
                users[user.email] = { workbookProgress: {} };
            }
            users[user.email].workbookProgress = data;
            localStorage.setItem('workbookUsers', JSON.stringify(users));
        }

        // Add logout functionality
        function logout() {
            sessionStorage.removeItem('currentUser');
            alert('Logged out successfully. Redirecting to login page...');
            setTimeout(() => {
                window.location.href = 'workbook-login.html';
            }, 1000);
        }


        // Export to PDF (simple version)
        function exportToPDF() {
            const currentUser = sessionStorage.getItem('currentUser');
            const user = currentUser ? JSON.parse(currentUser) : { name: 'User' };
            
            const inputs = document.querySelectorAll('input, textarea');
            let pdfContent = 'BREAKING FREE FROM YOUR DEFAULT MODE\n';
            pdfContent += `Complete Workbook - ${user.name}\n`;
            pdfContent += `Exported on: ${new Date().toLocaleDateString()}\n\n`;
            
            inputs.forEach(input => {
                if (input.value.trim() !== '') {
                    pdfContent += input.previousElementSibling.textContent + '\n';
                    pdfContent += input.value + '\n\n';
                }
            });

            // Create downloadable file
            const blob = new Blob([pdfContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `workbook-answers-${user.name.replace(/\s+/g, '-')}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Reset exercise
        function resetExercise() {
            if (confirm('Are you sure you want to reset this exercise? This will clear all your answers.')) {
                const inputs = document.querySelectorAll('input, textarea');
                inputs.forEach(input => {
                    input.value = '';
                });
                
                // Clear user's saved progress
                const currentUser = sessionStorage.getItem('currentUser');
                if (currentUser) {
                    const user = JSON.parse(currentUser);
                    const users = JSON.parse(localStorage.getItem('workbookUsers') || '{}');
                    if (users[user.email]) {
                        users[user.email].workbookProgress = {};
                        localStorage.setItem('workbookUsers', JSON.stringify(users));
                    }
                }
                
                updateProgress();
            }
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            checkUserLogin();
            checkUnlockedPhases();
            countQuestions();
            updateProgress();
            
            
            const inputs = document.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                input.addEventListener('input', () => {
                    updateProgress();
                    // Auto-save for logged-in users
                    const currentUser = sessionStorage.getItem('currentUser');
                    if (currentUser) {
                        setTimeout(autoSave, 1000); // Debounce auto-save
                    }
                });
            });
            
            // Auto-save every 30 seconds for logged-in users
            setInterval(() => {
                const currentUser = sessionStorage.getItem('currentUser');
                if (currentUser) {
                    autoSave();
                }
            }, 30000);
        });
    </script>
</body>
</html>
