<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 3: Solitude - Breaking Free From Your Default Mode</title>
    
    <meta name="description" content="Phase 3: Solitude - Learning to be comfortable with who you really are">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* Updated design - v2.0 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a2332 100%);
            color: #ffffff;
            line-height: 1.6;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="0.5" fill="%23ffd700" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
            z-index: 0;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 30px 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 50px;
            padding: 50px 40px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            border: 1px solid rgba(255, 215, 0, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .header:hover {
            border-color: #ffd700;
            box-shadow: 0 20px 40px rgba(255, 215, 0, 0.1);
        }

        .header h1 {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .header p {
            color: #e2e8f0;
            font-size: 1.3rem;
            font-weight: 400;
        }

        .phase-intro {
            background: rgba(255, 215, 0, 0.05);
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 40px;
            border: 1px solid #ffd700;
            backdrop-filter: blur(10px);
        }

        .phase-intro h2 {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 25px;
            line-height: 1.2;
        }

        .phase-intro p {
            color: #e2e8f0;
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .phase-intro .quote {
            color: #ffd700;
            font-weight: 700;
            font-size: 1.1rem;
            font-style: italic;
            text-align: center;
            margin-top: 25px;
        }

        .exercise {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 215, 0, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .exercise:hover {
            border-color: #ffd700;
            box-shadow: 0 20px 40px rgba(255, 215, 0, 0.1);
        }

        .exercise h2 {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 25px;
            line-height: 1.2;
        }

        .exercise h3 {
            color: #ffd700;
            font-size: 1.3rem;
            font-weight: 700;
            margin: 25px 0 20px 0;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            color: #ffd700;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 1rem;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid rgba(255, 215, 0, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            color: #ffffff;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #ffd700;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.1);
        }

        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .timer-section {
            background: #2a2a2a;
            border: 2px solid #ffd700;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
        }

        .timer-section h4 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .timer-display {
            font-size: 48px;
            font-weight: bold;
            color: #ffffff;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .timer-buttons {
            margin: 20px 0;
        }

        .btn {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #0f1419;
            border: none;
            padding: 18px 36px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 215, 0, 0.4);
        }

        .btn-secondary {
            background: transparent;
            color: #ffffff;
            border: 2px solid #ffd700;
            box-shadow: none;
        }

        .btn-secondary:hover {
            background: #ffd700;
            color: #0f1419;
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);
        }

        .timer-progress {
            background: #444;
            height: 8px;
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress-bar {
            background: linear-gradient(90deg, #ffd700, #ffed4e);
            height: 100%;
            width: 0%;
            transition: width 1s ease;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .nav-btn {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #0f1419;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-decoration: none;
            display: inline-block;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);
        }

        .nav-btn.disabled {
            background: rgba(255, 255, 255, 0.1);
            color: #888;
            cursor: not-allowed;
        }

        .nav-btn.disabled:hover {
            transform: none;
            box-shadow: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px 15px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .exercise {
                padding: 25px 20px;
            }
            
            .navigation {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>PHASE 3: SOLITUDE</h1>
            <p>Learning to be comfortable with who you really are</p>
        </div>

        <!-- Phase Introduction -->
        <div class="phase-intro">
            <h2>PHASE 3: SOLITUDE</h2>
            <p>Most men avoid being alone because that's where the truth lives. No performance, no distractions, no external validation. Just you and your authentic self. This phase is where you learn to be comfortable with who you really are.</p>
            <p class="quote">"Find a blank paper and a fresh pen."</p>
        </div>

        <!-- Exercise 5: The Lonely Journey -->
        <div class="exercise" id="exercise5">
            <h2>EXERCISE 5: THE LONELY JOURNEY</h2>
            <p style="color: #e2e8f0; margin-bottom: 20px;">Learning to enjoy your own company</p>

            <h3>Part A: Your Side-Feeders</h3>
            <p style="color: #e2e8f0; margin-bottom: 15px;">What people, places, or things do you use to feed your lies of the default mode?</p>

            <div class="form-group">
                <label for="people">People:</label>
                <textarea id="people" name="people" placeholder="Who do you use to avoid being alone with yourself?"></textarea>
            </div>

            <div class="form-group">
                <label for="places">Places:</label>
                <textarea id="places" name="places" placeholder="Where do you go to escape from yourself?"></textarea>
            </div>

            <div class="form-group">
                <label for="activities">Activities:</label>
                <textarea id="activities" name="activities" placeholder="What do you do to avoid facing yourself?"></textarea>
            </div>

            <div class="form-group">
                <label for="substances">Substances:</label>
                <textarea id="substances" name="substances" placeholder="What do you use to numb yourself?"></textarea>
            </div>

            <div class="form-group">
                <label for="moment-feeling">How do these make you feel in the moment?</label>
                <textarea id="moment-feeling" name="moment-feeling" placeholder="What do you feel when you're using these side-feeders?"></textarea>
            </div>

            <div class="form-group">
                <label for="after-feeling">How do you feel after?</label>
                <textarea id="after-feeling" name="after-feeling" placeholder="What do you feel when the distraction ends?"></textarea>
            </div>

            <h3>Part B: The Silence Challenge</h3>
            <p style="color: #e2e8f0; margin-bottom: 15px;">Spend 30 minutes alone with no distractions. No phone, no music, no food, no entertainment.</p>

            <!-- Timer Section -->
            <div class="timer-section">
                <h4>‚è∞ 30-Minute Silence Timer</h4>
                <div class="timer-display" id="timer-display">30:00</div>
                <div class="timer-buttons">
                    <button class="btn" id="timer-btn" onclick="startSilenceTimer()">üöÄ Start Silence Challenge</button>
                    <button class="btn btn-secondary" id="stop-btn" onclick="stopSilenceTimer()" style="display: none;">‚èπÔ∏è Stop Timer</button>
                </div>
                <p id="timer-status" style="color: #e2e8f0; font-style: italic; margin-top: 15px;">Ready to begin your silence challenge</p>
                <div class="timer-progress">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
            </div>

            <div class="form-group">
                <label for="discovered">What did you discover about yourself?</label>
                <textarea id="discovered" name="discovered" placeholder="What did you learn during the silence challenge?"></textarea>
            </div>

            <div class="form-group">
                <label for="thoughts">What thoughts came up?</label>
                <textarea id="thoughts" name="thoughts" placeholder="What was going through your mind?"></textarea>
            </div>

            <div class="form-group">
                <label for="emotions">What emotions did you feel?</label>
                <textarea id="emotions" name="emotions" placeholder="What feelings surfaced during the silence?"></textarea>
            </div>

            <div class="form-group">
                <label for="hardest">What was the hardest part?</label>
                <textarea id="hardest" name="hardest" placeholder="What was most difficult about being alone?"></textarea>
            </div>

            <div class="form-group">
                <label for="revealing">What was the most revealing?</label>
                <textarea id="revealing" name="revealing" placeholder="What surprised you most about yourself?"></textarea>
            </div>

            <h3>Part C: Your Relationship with Yourself</h3>

            <div class="form-group">
                <label for="comfort-level">Rate your comfort level with being alone (1-10):</label>
                <input type="number" id="comfort-level" name="comfort-level" min="1" max="10" placeholder="1-10">
            </div>

            <div class="form-group">
                <label for="avoid-alone">What do you avoid when you're alone?</label>
                <textarea id="avoid-alone" name="avoid-alone" placeholder="What do you run from when you're by yourself?"></textarea>
            </div>

            <div class="form-group">
                <label for="discover-alone">What do you discover when you're alone?</label>
                <textarea id="discover-alone" name="discover-alone" placeholder="What truths emerge when you're by yourself?"></textarea>
            </div>

            <div class="form-group">
                <label for="change-company">What would change if you learned to enjoy your own company?</label>
                <textarea id="change-company" name="change-company" placeholder="How would your life be different if you were comfortable alone?"></textarea>
            </div>
        </div>

        <!-- Exercise 6: Facing the Void -->
        <div class="exercise" id="exercise6">
            <h2>EXERCISE 6: FACING THE VOID</h2>
            <p style="color: #e2e8f0; margin-bottom: 20px;">What happens when you stop running</p>

            <h3>Part A: The Emptiness</h3>

            <div class="form-group">
                <label for="emptiness-feel">What do you feel when you're not doing anything?</label>
                <textarea id="emptiness-feel" name="emptiness-feel" placeholder="What emotions come up when you're idle?"></textarea>
            </div>

            <div class="form-group">
                <label for="emptiness-thoughts">What thoughts come up when you're not distracted?</label>
                <textarea id="emptiness-thoughts" name="emptiness-thoughts" placeholder="What goes through your mind in the silence?"></textarea>
            </div>

            <div class="form-group">
                <label for="emptiness-emotions">What emotions do you avoid by staying busy?</label>
                <textarea id="emptiness-emotions" name="emptiness-emotions" placeholder="What feelings do you run from?"></textarea>
            </div>

            <div class="form-group">
                <label for="emptiness-scary">What's the scariest part about being alone with your thoughts?</label>
                <textarea id="emptiness-scary" name="emptiness-scary" placeholder="What frightens you most about solitude?"></textarea>
            </div>

            <h3>Part B: The Real You Underneath</h3>

            <div class="form-group">
                <label for="real-you">Who are you when you're not performing for anyone?</label>
                <textarea id="real-you" name="real-you" placeholder="What's your authentic self like?"></textarea>
            </div>

            <div class="form-group">
                <label for="real-want">What do you really want when no one's watching?</label>
                <textarea id="real-want" name="real-want" placeholder="What are your true desires?"></textarea>
            </div>

            <div class="form-group">
                <label for="real-do">What would you do if you weren't trying to prove anything?</label>
                <textarea id="real-do" name="real-do" placeholder="How would you act without performance?"></textarea>
            </div>

            <div class="form-group">
                <label for="real-truth">What's your truth when you're not trying to be someone else?</label>
                <textarea id="real-truth" name="real-truth" placeholder="What's your authentic truth?"></textarea>
            </div>

            <h3>Part C: Embracing Solitude</h3>

            <div class="form-group">
                <label for="solitude-change">What would change if you learned to be comfortable alone?</label>
                <textarea id="solitude-change" name="solitude-change" placeholder="How would your life transform?"></textarea>
            </div>

            <div class="form-group">
                <label for="relationships-improve">How would your relationships improve if you didn't need them to fill a void?</label>
                <textarea id="relationships-improve" name="relationships-improve" placeholder="What would change in your connections?"></textarea>
            </div>

            <div class="form-group">
                <label for="create-alone">What would you create if you weren't afraid of being alone?</label>
                <textarea id="create-alone" name="create-alone" placeholder="What would you build or create?"></textarea>
            </div>
        </div>

        <!-- Navigation -->
        <div class="navigation">
            <a href="workbook-menu.html" class="nav-btn">‚Üê Back to Menu</a>
            <button class="nav-btn" onclick="saveProgress()">üíæ Save Progress</button>
            <button class="nav-btn" onclick="completePhase()">Complete Phase ‚Üí</button>
        </div>
    </div>

    <script>
        // Timer functionality for Silence Challenge
        let silenceTimer = null;
        let timeRemaining = 30 * 60; // 30 minutes in seconds
        let isTimerRunning = false;

        function startSilenceTimer() {
            if (isTimerRunning) return;
            
            isTimerRunning = true;
            timeRemaining = 30 * 60; // Reset to 30 minutes
            
            // Update UI
            document.getElementById('timer-btn').style.display = 'none';
            document.getElementById('stop-btn').style.display = 'inline-block';
            document.getElementById('timer-status').textContent = 'Silence challenge in progress... Find a quiet space and begin.';
            
            // Start the timer
            silenceTimer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    completeSilenceChallenge();
                }
            }, 1000);
        }

        function stopSilenceTimer() {
            if (silenceTimer) {
                clearInterval(silenceTimer);
                silenceTimer = null;
            }
            
            isTimerRunning = false;
            
            // Update UI
            document.getElementById('timer-btn').style.display = 'inline-block';
            document.getElementById('stop-btn').style.display = 'none';
            document.getElementById('timer-status').textContent = 'Timer stopped. Ready to begin your silence challenge.';
            
            // Reset display
            document.getElementById('timer-display').textContent = '30:00';
            document.getElementById('progress-bar').style.width = '0%';
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const display = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('timer-display').textContent = display;
            
            // Update progress bar
            const progress = ((30 * 60 - timeRemaining) / (30 * 60)) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';
        }

        function completeSilenceChallenge() {
            if (silenceTimer) {
                clearInterval(silenceTimer);
                silenceTimer = null;
            }
            
            isTimerRunning = false;
            
            // Play bell sound (using Web Audio API)
            playBellSound();
            
            // Update UI
            document.getElementById('timer-display').textContent = '00:00';
            document.getElementById('timer-btn').style.display = 'inline-block';
            document.getElementById('stop-btn').style.display = 'none';
            document.getElementById('timer-status').textContent = 'üéâ Silence challenge complete! Well done. Now reflect on your experience.';
            document.getElementById('progress-bar').style.width = '100%';
            
            // Show completion message
            setTimeout(() => {
                alert('üîî Silence Challenge Complete!\n\nCongratulations! You\'ve spent 30 minutes in silence. This is powerful work. Now take a moment to reflect on what you discovered about yourself.');
            }, 1000);
        }

        function playBellSound() {
            try {
                // Create a simple bell sound using Web Audio API
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Bell-like sound (multiple frequencies)
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(1000, audioContext.currentTime + 0.1);
                oscillator.frequency.setValueAtTime(1200, audioContext.currentTime + 0.2);
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 1);
                
                // Play a second bell for emphasis
                setTimeout(() => {
                    const oscillator2 = audioContext.createOscillator();
                    const gainNode2 = audioContext.createGain();
                    
                    oscillator2.connect(gainNode2);
                    gainNode2.connect(audioContext.destination);
                    
                    oscillator2.frequency.setValueAtTime(1000, audioContext.currentTime);
                    oscillator2.frequency.setValueAtTime(1200, audioContext.currentTime + 0.1);
                    
                    gainNode2.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gainNode2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.8);
                    
                    oscillator2.start(audioContext.currentTime);
                    oscillator2.stop(audioContext.currentTime + 0.8);
                }, 200);
                
            } catch (error) {
                console.log('Audio not available, using visual notification only');
            }
        }

        // Check if user is logged in
        function checkUserLogin() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) {
                alert('Please log in to access the workbook.');
                window.location.href = 'workbook-login.html';
                return;
            }
            
            const user = JSON.parse(currentUser);
            // Update header to show user name
            const header = document.querySelector('.header h1');
            if (header) {
                header.innerHTML = `PHASE 3: SOLITUDE<br><small style="color: #ffd700;">Welcome, ${user.name}</small>`;
            }
        }

        // Load user progress
        function loadUserProgress() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) return;
            
            const user = JSON.parse(currentUser);
            const users = JSON.parse(localStorage.getItem('workbookUsers') || '{}');
            
            if (users[user.email] && users[user.email].phaseProgress && users[user.email].phaseProgress.phase3) {
                const phase3Progress = users[user.email].phaseProgress.phase3;
                const inputs = document.querySelectorAll('input, textarea');
                
                inputs.forEach(input => {
                    if (phase3Progress[input.name]) {
                        input.value = phase3Progress[input.name];
                    }
                });
            }
        }

        // Save user progress
        function saveProgress() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) {
                alert('Please log in to save your progress.');
                return;
            }
            
            const user = JSON.parse(currentUser);
            const users = JSON.parse(localStorage.getItem('workbookUsers') || '{}');
            const inputs = document.querySelectorAll('input, textarea');
            const data = {};
            
            inputs.forEach(input => {
                data[input.name] = input.value;
            });

            // Save to user's phase progress
            if (!users[user.email]) {
                users[user.email] = { phaseProgress: {} };
            }
            if (!users[user.email].phaseProgress) {
                users[user.email].phaseProgress = {};
            }
            users[user.email].phaseProgress.phase3 = data;
            users[user.email].phaseProgress.phase3.started = true;
            
            localStorage.setItem('workbookUsers', JSON.stringify(users));
            alert('Progress saved successfully!');
        }

        // Complete phase
        function completePhase() {
            if (confirm('Are you ready to complete Phase 3? This will unlock Phase 4.')) {
                const currentUser = sessionStorage.getItem('currentUser');
                const user = JSON.parse(currentUser);
                const users = JSON.parse(localStorage.getItem('workbookUsers') || '{}');
                
                // Mark phase as completed
                if (!users[user.email]) {
                    users[user.email] = { phaseProgress: {} };
                }
                if (!users[user.email].phaseProgress) {
                    users[user.email].phaseProgress = {};
                }
                users[user.email].phaseProgress.phase3.completed = true;
                users[user.email].phaseProgress.phase3.completedAt = new Date().toISOString();
                
                localStorage.setItem('workbookUsers', JSON.stringify(users));
                
                alert('üéâ Congratulations! Phase 3 completed! Phase 4 is now unlocked.');
                window.location.href = 'workbook-menu.html';
            }
        }

        // Auto-save functionality
        function autoSave() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) return;
            
            const user = JSON.parse(currentUser);
            const users = JSON.parse(localStorage.getItem('workbookUsers') || '{}');
            const inputs = document.querySelectorAll('input, textarea');
            const data = {};
            
            inputs.forEach(input => {
                data[input.name] = input.value;
            });

            // Auto-save to user's phase progress
            if (!users[user.email]) {
                users[user.email] = { phaseProgress: {} };
            }
            if (!users[user.email].phaseProgress) {
                users[user.email].phaseProgress = {};
            }
            users[user.email].phaseProgress.phase3 = data;
            users[user.email].phaseProgress.phase3.started = true;
            
            localStorage.setItem('workbookUsers', JSON.stringify(users));
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            checkUserLogin();
            loadUserProgress();
            
            // Auto-save every 30 seconds
            setInterval(autoSave, 30000);
            
            // Auto-save on input change
            const inputs = document.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                input.addEventListener('input', () => {
                    setTimeout(autoSave, 1000); // Debounce auto-save
                });
            });
        });
    </script>
</body>
</html>
